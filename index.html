<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ’– Una invitaciÃ³n para ti</title>
  <style>
    :root{
      --bg1:#ffdde8;
      --bg2:#c9e7ff;
      --card:#ffffffcc;
      --txt:#2a2a2a;
      --muted:#6b7280;
      --pink:#ff4d8d;
      --pink2:#ff8fb8;
      --shadow: 0 18px 60px rgba(0,0,0,.18);
      --radius: 22px;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family:var(--sans);
      color:var(--txt);
      display:grid;
      place-items:center;
      overflow:hidden;
      background:
        radial-gradient(1200px 700px at 20% 20%, rgba(255,77,141,.25), transparent 60%),
        radial-gradient(900px 600px at 80% 70%, rgba(51,214,255,.25), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
    }

    /* fondo cute */
    .bg-stickers{
      position:absolute; inset:0;
      opacity:.18;
      pointer-events:none;
      background-image:
        radial-gradient(circle at 12% 24%, rgba(255,77,141,.55) 0 2px, transparent 3px),
        radial-gradient(circle at 78% 18%, rgba(255,77,141,.45) 0 2px, transparent 3px),
        radial-gradient(circle at 55% 82%, rgba(51,214,255,.5) 0 2px, transparent 3px),
        radial-gradient(circle at 30% 70%, rgba(255,200,0,.35) 0 2px, transparent 3px);
      filter: blur(.2px);
    }

    .wrap{
      width:min(720px, 92vw);
      position:relative;
      z-index:2;
    }

    .card{
      background:var(--card);
      backdrop-filter: blur(10px);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:1px solid rgba(255,77,141,.25);
      overflow:hidden;
    }

    .header{
      padding:18px 18px 12px;
      display:flex;
      align-items:center;
      gap:12px;
      border-bottom:1px solid rgba(0,0,0,.06);
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:rgba(255,77,141,.12);
      border:1px solid rgba(255,77,141,.22);
      font-weight:700;
      font-size:14px;
    }
    .title{
      margin-left:auto;
      font-size:13px;
      color:var(--muted);
      font-weight:600;
    }

    /* steps */
    .stage{
      position:relative;
      padding:18px;
      min-height:360px;
      display:grid;
      place-items:center;
    }

    .panel{
      width:100%;
      max-width:560px;
      padding:18px;
      border-radius:18px;
      background:rgba(255,255,255,.75);
      border:1px solid rgba(0,0,0,.06);
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      transform: translateY(8px);
      opacity:0;
      pointer-events:none;
      transition: opacity .35s ease, transform .35s ease;
    }
    .panel.active{
      opacity:1;
      transform: translateY(0);
      pointer-events:auto;
    }

    .big{
      font-size:28px;
      line-height:1.15;
      margin:2px 0 10px;
      text-align:center;
    }
    .sub{
      text-align:center;
      font-size:16px;
      color:var(--muted);
      margin:0 0 14px;
    }

    .cute{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      font-size:30px;
      margin:8px 0 10px;
    }

    .info{
      display:grid;
      gap:10px;
      margin:14px 0 6px;
      padding:12px 12px;
      border-radius:14px;
      background: rgba(255,77,141,.08);
      border: 1px dashed rgba(255,77,141,.35);
      font-size:15px;
    }
    .row{
      display:flex;
      gap:10px;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
    }
    .label{color:#444; font-weight:800}
    .value{color:#111; font-weight:700}
    .value small{color:var(--muted); font-weight:600}

    .actions{
      margin-top:14px;
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      position:relative;
    }

    button{
      border:none;
      border-radius:16px;
      padding:14px 16px;
      font-weight:900;
      font-size:16px;
      cursor:pointer;
      transition: transform .08s ease, filter .12s ease;
      user-select:none;
      touch-action: manipulation;
    }
    button:active{transform: scale(.98)}
    .btnNext{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#fff;
      box-shadow: 0 14px 28px rgba(255,77,141,.28);
      min-width:220px;
    }
    .btnSoft{
      background:#fff;
      color:#222;
      border:1px solid rgba(0,0,0,.10);
      min-width:220px;
    }

    /* pantalla final: area de botones con "no" escapista */
    .arena{
      position:relative;
      width:100%;
      max-width:560px;
      height:170px;
      border-radius:18px;
      background: rgba(51,214,255,.08);
      border: 1px solid rgba(51,214,255,.20);
      overflow:hidden;
      margin-top:12px;
      padding:12px;
    }
    .arena .hint{
      text-align:center;
      color:var(--muted);
      font-weight:700;
      margin-bottom:10px;
    }
    .yes{
      position:absolute;
      left:50%;
      bottom:16px;
      transform: translateX(-50%);
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:#fff;
      box-shadow: 0 16px 30px rgba(255,77,141,.30);
      padding:14px 18px;
      min-width:240px;
    }
    .no{
      position:absolute;
      left:14px;
      top:58px;
      background:#ffffff;
      color:#333;
      border:1px solid rgba(0,0,0,.12);
      padding:12px 14px;
      min-width:170px;
    }

    /* footer progress */
    .footer{
      padding:14px 18px;
      display:flex;
      gap:10px;
      align-items:center;
      border-top:1px solid rgba(0,0,0,.06);
      background:rgba(255,255,255,.55);
    }
    .dots{
      display:flex;
      gap:8px;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background:rgba(0,0,0,.10);
      transition: transform .25s ease, background .25s ease;
    }
    .dot.on{
      background: rgba(255,77,141,.55);
      transform: scale(1.2);
    }
    .footer .small{
      margin-left:auto;
      color:var(--muted);
      font-weight:700;
      font-size:13px;
    }

    /* floating hearts/cats */
    .floaties{position:absolute; inset:0; pointer-events:none; z-index:1;}
    .floater{
      position:absolute;
      font-size:18px;
      opacity:.9;
      animation: rise linear forwards;
      filter: drop-shadow(0 10px 18px rgba(255,77,141,.25));
    }
    @keyframes rise{
      from{transform: translateY(0) rotate(0deg); opacity:0}
      10%{opacity:1}
      to{transform: translateY(-120vh) rotate(240deg); opacity:0}
    }

    /* confetti */
    canvas{position:absolute; inset:0; pointer-events:none; z-index:3;}

    @media (max-width:480px){
      .big{font-size:24px}
      .arena{height:190px}
      .yes{min-width:260px}
    }
  </style>
</head>

<body>
  <div class="bg-stickers"></div>
  <div class="floaties" id="floaties"></div>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <div class="card">
      <div class="header">
        <div class="pill">ğŸ’– InvitaciÃ³n linda</div>
        <div class="title" id="miniTitle">para la persona mÃ¡s especial âœ¨</div>
      </div>

      <div class="stage">

        <!-- STEP 1 -->
        <section class="panel active" data-step="1">
          <div class="cute">ğŸ±ğŸ’—ğŸ±</div>
          <h1 class="big">Holaaa mi amor ğŸ¥ºğŸ’</h1>
          <p class="sub">Tengo algo muy importante que preguntarteâ€¦</p>
          <div class="actions">
            <button class="btnNext" id="go2">Siguiente âœ¨</button>
            <button class="btnSoft" id="peek">Ver una pista ğŸ‘€</button>
          </div>
        </section>

        <!-- STEP 2 -->
        <section class="panel" data-step="2">
          <div class="cute">ğŸ’˜ğŸ¾ğŸ’˜</div>
          <h2 class="big">Â¿Adivina quÃ©? ğŸ˜š</h2>
          <p class="sub">Te preparÃ© una invitaciÃ³n sÃºper lindaâ€¦ y es para ti ğŸ’—</p>

          <div class="info" id="infoBox">
            <div class="row"><span class="label">ğŸ—“ï¸ DÃ­a</span><span class="value" id="vDate">14/02 <small>(pero tÃº eliges si quieres otro)</small></span></div>
            <div class="row"><span class="label">ğŸ“ Lugar</span><span class="value" id="vPlace">Donde tÃº quieras ğŸ’•</span></div>
            <div class="row"><span class="label">ğŸ“ Plan</span><span class="value" id="vPlan">Comer algo rico + paseÃ­to + muchos besitos ğŸ˜³</span></div>
          </div>

          <div class="actions">
            <button class="btnSoft" id="back1">AtrÃ¡s ğŸ¾</button>
            <button class="btnNext" id="go3">Siguiente ğŸ’</button>
          </div>
        </section>

        <!-- STEP 3 -->
        <section class="panel" data-step="3">
          <div class="cute">ğŸ±âœ¨ğŸ’—âœ¨ğŸ±</div>
          <h2 class="big">Y ahora sÃ­â€¦ la pregunta ğŸ¥¹</h2>
          <p class="sub">Responde con un toque en la pantalla ğŸ‘‡</p>

          <div class="arena" id="arena">
            <div class="hint" id="arenaHint">Elige una opciÃ³n, mi amor ğŸ’–</div>
            <button class="no" id="btnNo" aria-label="No">No ğŸ˜¶</button>
            <button class="yes" id="btnYes" aria-label="SÃ­">SÃÃÃ ğŸ’–ğŸ’–</button>
          </div>

          <div class="actions">
            <button class="btnSoft" id="back2">AtrÃ¡s ğŸ¾</button>
          </div>
        </section>

        <!-- STEP 4 -->
        <section class="panel" data-step="4">
          <div class="cute">ğŸ‰ğŸ±ğŸ’–ğŸ±ğŸ‰</div>
          <h2 class="big">Â¡SABÃA QUE DIRÃAS QUE SÃ! ğŸ˜­ğŸ’</h2>
          <p class="sub" id="finalText">Te amo muchÃ­simo. Gracias por hacerme tan feliz ğŸ’–</p>

          <div class="actions">
            <button class="btnNext" id="share">Copiar mensaje para enviarte ğŸ’Œ</button>
            <button class="btnSoft" id="restart">Ver de nuevo ğŸ¥°</button>
          </div>
        </section>

      </div>

      <div class="footer">
        <div class="dots" aria-hidden="true">
          <span class="dot on" id="d1"></span>
          <span class="dot" id="d2"></span>
          <span class="dot" id="d3"></span>
          <span class="dot" id="d4"></span>
        </div>
        <div class="small" id="stepTxt">Paso 1 de 4</div>
      </div>
    </div>
  </div>

  <script>
    // =======================
    // PERSONALIZA AQUÃ ğŸ’–
    // =======================
    const NOMBRE = "Mi amor";      // ej: "Sofi", "Gabi", "Amor"
    const DIA = "14/02";
    const LUGAR = "Donde tÃº quieras ğŸ’•";
    const PLAN = "Comer algo rico + paseÃ­to + muchos besitos ğŸ˜³";
    const MENSAJE_FINAL = "Te amo muchÃ­simo. Gracias por hacerme tan feliz ğŸ’–";
    // =======================

    const panels = Array.from(document.querySelectorAll(".panel"));
    const stepTxt = document.getElementById("stepTxt");
    const miniTitle = document.getElementById("miniTitle");

    const d1 = document.getElementById("d1");
    const d2 = document.getElementById("d2");
    const d3 = document.getElementById("d3");
    const d4 = document.getElementById("d4");

    const vDate = document.getElementById("vDate");
    const vPlace = document.getElementById("vPlace");
    const vPlan = document.getElementById("vPlan");
    const finalText = document.getElementById("finalText");

    miniTitle.textContent = `para ${NOMBRE} âœ¨`;
    vDate.innerHTML = `${DIA} <small>(pero tÃº eliges si quieres otro)</small>`;
    vPlace.textContent = LUGAR;
    vPlan.textContent = PLAN;
    finalText.textContent = MENSAJE_FINAL;

    let step = 1;
    const setStep = (n) => {
      step = n;
      panels.forEach(p => p.classList.toggle("active", Number(p.dataset.step) === step));
      stepTxt.textContent = `Paso ${step} de 4`;
      [d1,d2,d3,d4].forEach((d,i)=> d.classList.toggle("on", i+1 === step));
    };

    // botones navegaciÃ³n
    document.getElementById("go2").onclick = ()=> setStep(2);
    document.getElementById("go3").onclick = ()=> setStep(3);
    document.getElementById("back1").onclick = ()=> setStep(1);
    document.getElementById("back2").onclick = ()=> setStep(2);

    document.getElementById("peek").onclick = ()=>{
      alert("Pista: es una invitaciÃ³n con amor, gatitos, besitos y un SÃ ğŸ±ğŸ’–");
    };

    // =======================
    // FLOATIES (corazones/gatitos)
    // =======================
    const floaties = document.getElementById("floaties");
    const EMOJIS = ["ğŸ’–","ğŸ’˜","ğŸ’—","âœ¨","ğŸ±","ğŸ¾","ğŸ¥º","ğŸŒ¸","ğŸ’"];
    function spawnFloater(){
      const el = document.createElement("div");
      el.className = "floater";
      el.textContent = EMOJIS[(Math.random()*EMOJIS.length)|0];
      const left = Math.random()*100;
      const size = 14 + Math.random()*22;
      const dur = 4 + Math.random()*5;
      el.style.left = left + "vw";
      el.style.bottom = "-10vh";
      el.style.fontSize = size + "px";
      el.style.animationDuration = dur + "s";
      floaties.appendChild(el);
      setTimeout(()=> el.remove(), dur*1000);
    }
    let floatTimer = setInterval(spawnFloater, 220);

    // =======================
    // BOTÃ“N "NO" QUE SE ESCAPA ğŸ˜ˆ
    // (funciona con mouse y con dedo)
    // =======================
    const arena = document.getElementById("arena");
    const btnNo = document.getElementById("btnNo");
    const arenaHint = document.getElementById("arenaHint");

    function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }

    function moveNoButton(){
      const a = arena.getBoundingClientRect();
      const b = btnNo.getBoundingClientRect();

      // limites dentro del arena (con padding)
      const pad = 8;
      const maxX = a.width - b.width - pad;
      const maxY = a.height - b.height - pad;

      // posiciÃ³n aleatoria
      const x = clamp(Math.random()*maxX, pad, maxX);
      const y = clamp(Math.random()*maxY, pad+18, maxY); // un poco mÃ¡s abajo para no tapar texto

      btnNo.style.left = x + "px";
      btnNo.style.top = y + "px";
    }

    // Se mueve cuando lo intentan tocar/atrapar
    btnNo.addEventListener("mouseenter", () => { arenaHint.textContent = "ğŸ˜³ ay no, ese botÃ³n es tÃ­midoâ€¦"; moveNoButton(); });
    btnNo.addEventListener("pointerenter", () => { moveNoButton(); });
    btnNo.addEventListener("pointerdown", (e) => { e.preventDefault(); moveNoButton(); });
    btnNo.addEventListener("touchstart", (e) => { e.preventDefault(); moveNoButton(); }, {passive:false});
    btnNo.addEventListener("focus", () => { btnNo.blur(); moveNoButton(); });

    // inicial: ubicar "No" en un lugar lindo
    moveNoButton();

    // =======================
    // CONFETTI cuando dice SÃ ğŸ‰
    // =======================
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    function resize(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
    }
    window.addEventListener("resize", resize);
    resize();

    let confetti = [];
    function burst(){
      const count = 140;
      for(let i=0;i<count;i++){
        confetti.push({
          x: Math.random()*canvas.width,
          y: -20,
          vx: (Math.random()*2-1) * 2.6,
          vy: 2.5 + Math.random()*4.2,
          r: 3 + Math.random()*5,
          rot: Math.random()*Math.PI*2,
          vr: (Math.random()*2-1)*0.2,
          emoji: Math.random() < 0.35 ? "ğŸ’–" : (Math.random()<0.5 ? "âœ¨" : "ğŸ±")
        });
      }
    }
    function tick(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      confetti = confetti.filter(p => p.y < canvas.height + 40);
      for(const p of confetti){
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.font = `${p.r*4}px ${getComputedStyle(document.body).fontFamily}`;
        ctx.fillText(p.emoji, -p.r*2, p.r*2);
        ctx.restore();
      }
      requestAnimationFrame(tick);
    }
    tick();

    function celebrate(){
      arenaHint.textContent = "AAAAA ğŸ’–ğŸ’–ğŸ’–";
      burst();
      clearInterval(floatTimer);
      floatTimer = setInterval(spawnFloater, 90);
      setStep(4);
    }

    document.getElementById("btnYes").addEventListener("click", celebrate);

    // copiar mensaje
    document.getElementById("share").addEventListener("click", async ()=>{
      const msg =
`ğŸ’– Hola ${NOMBRE} ğŸ’–
Â¿Aceptas mi invitaciÃ³n? ğŸ±âœ¨
ğŸ—“ï¸ DÃ­a: ${DIA}
ğŸ“ Lugar: ${LUGAR}
ğŸ“ Plan: ${PLAN}
Te amo ğŸ’`;
      try{
        await navigator.clipboard.writeText(msg);
        alert("Â¡Listo! CopiÃ© el mensajito ğŸ’Œ (pÃ©galo en WhatsApp)");
      }catch{
        prompt("Copia este mensaje:", msg);
      }
    });

    document.getElementById("restart").addEventListener("click", ()=>{
      setStep(1);
      moveNoButton();
    });

    // Tip: enter tambiÃ©n acepta (por si estÃ¡ en compu)
    window.addEventListener("keydown", (e)=>{
      if(e.key === "Enter" && step === 3) celebrate();
    });
  </script>
</body>
</html>
